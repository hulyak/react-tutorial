(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{125:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/state-1d07b2e858fcaba2824d05049f6fd37b.gif"},126:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/demo3-44c5b3024ce363803eed2b0a6cac7d73.gif"},127:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/demo4-d0e7a84e55622f5525f11c68f42da259.gif"},128:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/demo5-1984ff801b75bda396de6e310d9bc36b.gif"},129:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/todo-cac00e7d0091d3fd90d9d909350ef11d.png"},130:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/demo2-6c89d4adcae563331e55ff65e11e76ea.gif"},68:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return r})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return b}));var a=n(2),i=n(6),o=(n(0),n(75)),s={id:"The useState Hook",title:"The useState Hook"},r={unversionedId:"The useState Hook",id:"The useState Hook",isDocsHomePage:!1,title:"The useState Hook",description:"State helps build highly performant web apps. To keep track of our application logic, we need to use useState. We can reflect any UI(user interface) changes via changes in state.",source:"@site/docs/doc2.md",slug:"/The useState Hook",permalink:"/react-tutorial/docs/The useState Hook",editUrl:"https://github.com/hulyak/react-tutorial/docs/doc2.md",version:"current",sidebar:"someSidebar",previous:{title:"Getting Started",permalink:"/react-tutorial/docs/"},next:{title:"The useEffect Hook",permalink:"/react-tutorial/docs/The useEffect Hook"}},l=[{value:"useState with objects",id:"usestate-with-objects",children:[]},{value:"useState with arrays",id:"usestate-with-arrays",children:[]}],c={rightToc:l};function b(e){var t=e.components,s=Object(i.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},c,s,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"State helps build highly performant web apps. To keep track of our application logic, we need to use ",Object(o.b)("inlineCode",{parentName:"p"},"useState"),". We can reflect any UI(user interface) changes via changes in state."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"useState")," function lets you use state in a functional component."),Object(o.b)("p",null,"In order to use, ",Object(o.b)("inlineCode",{parentName:"p"},"useState")," in our component, we have to import ",Object(o.b)("inlineCode",{parentName:"p"},"useState")," first. ",Object(o.b)("inlineCode",{parentName:"p"},"useState")," is a named export; so, we will export it with curly braces."),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"import React, { useState } from 'react';")),Object(o.b)("p",null,"Let's make an example of how to use ",Object(o.b)("inlineCode",{parentName:"p"},"useState"),"."),Object(o.b)("p",null,"Create a new file inside ",Object(o.b)("inlineCode",{parentName:"p"},"components")," directory and name it ",Object(o.b)("inlineCode",{parentName:"p"},"StateHook.js"),".Then copy this code into the ",Object(o.b)("inlineCode",{parentName:"p"},"StateHook.js"),", and let's see what we get. Also, don't forget to import this component into ",Object(o.b)("inlineCode",{parentName:"p"},"App.js"),"."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"// src > components > StateHook.js\n\nimport React, {useState} from 'react';\n\nconst StateHook = () => {\n  \n  const [title, setTitle] = useState('hello world');\n\n// update the state with setTitle function\n  const handleClick = () => {\n    setTitle('React is cool');\n  };\n\n  return (\n    <div className=\"container\">\n      <h2>{title}</h2>\n      <button type=\"button\" onClick={handleClick} className=\"btn\">\n        Change title\n      </button>\n    </div>\n  );\n};\n\nexport default StateHook;\n\n")),Object(o.b)("p",null,Object(o.b)("img",{alt:"demo",src:n(125).default})),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"useState")," returns an array of two items:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"the first element is the ",Object(o.b)("em",{parentName:"li"},"current value of the state"),"."),Object(o.b)("li",{parentName:"ul"},"the second is a ",Object(o.b)("em",{parentName:"li"},"state setter/updater function"),". We use to update our state.")),Object(o.b)("p",null,"In short, state tracks the value of our state. The setter function updates the state, and rerenders JSX elements."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"// destructuring an array\n// initial state is 'hello world'\nconst [title, setTitle] = useState('hello world');\n")),Object(o.b)("p",null,"Developers generally prefer array destructuring with ",Object(o.b)("inlineCode",{parentName:"p"},"useState")," hook or we need to write more verbose code like this:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"const items = useState('hello world');\nconst title = items[0];\nconst setTitle = items[1];\n")),Object(o.b)("p",null,"You may ask, ",Object(o.b)("em",{parentName:"p"},"How React knows when to render?")," React components will only rerender when its props or state have changed. Props are passed into a component and read-only, whereas a state holds information about the component, and can be updated. During the initial render, the returned state is the same as the value passed as the first argument (initialState)."),Object(o.b)("p",null,"So, here we updated our state with ",Object(o.b)("inlineCode",{parentName:"p"},"setTitle")," setter function and passed a different string inside of it. When the button gets clicked, we are updating the state with  ",Object(o.b)("inlineCode",{parentName:"p"},"onClick event handler"),". The ",Object(o.b)("inlineCode",{parentName:"p"},"setTitle")," function accepts a new state value and rerenders the component. "),Object(o.b)("p",null,"In class components, the state is always an object, with the ",Object(o.b)("inlineCode",{parentName:"p"},"useState")," hook, the state does not have to be an object. Instead, you can break up state into multiple pieces that you can update independently."),Object(o.b)("h2",{id:"usestate-with-objects"},"useState with objects"),Object(o.b)("p",null,"What I mean by the title is we will create an object inside our ",Object(o.b)("inlineCode",{parentName:"p"},"useState")," hook, instead of passing a string. The initial value of ",Object(o.b)("inlineCode",{parentName:"p"},"useState")," can be of any type, like an array, an object, a boolean, a number, a string, etc."),Object(o.b)("p",null,"First, let's create a new component under ",Object(o.b)("inlineCode",{parentName:"p"},"components")," folder, name it ",Object(o.b)("inlineCode",{parentName:"p"},"StateHookObject.js"),", and copy this code:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"// src > components > StateHookObject.js\nimport React, {useState} from 'react';\n\nconst StateHookObject = () => {\n  // pass an object for the initial state\n  const [name, setName] = useState({firstName: '', lastName: ''});\n\n  return (\n    <form>\n        <input\n          type=\"text\"\n          value={name.firstName}\n          // set firstName to whatever is typed inside the input field\n          onChange={(e) => setName({firstName: e.target.value})}\n        />\n        <input\n          type=\"text\"\n          value={name.lastName}\n          // set lastName to whatever is typed inside the input field\n          onChange={(e) => setName({lastName: e.target.value})}\n        />\n        <h2>First name is: {name.firstName}</h2>\n        <h2>Last name is: {name.lastName}</h2>\n    </form>\n  );\n};\n\nexport default StateHookObject;\n")),Object(o.b)("p",null,"Now, let\u2019s break down the code above to explain what we\u2019ve added and how it works."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"importing the ",Object(o.b)("inlineCode",{parentName:"li"},"useState")," hook from React"),Object(o.b)("li",{parentName:"ul"},"creating a new constant that returns ",Object(o.b)("inlineCode",{parentName:"li"},"name")," and ",Object(o.b)("inlineCode",{parentName:"li"},"setName")," from ",Object(o.b)("inlineCode",{parentName:"li"},"useState"),"."),Object(o.b)("li",{parentName:"ul"},"initializing the ",Object(o.b)("inlineCode",{parentName:"li"},"useState")," hook with an object."),Object(o.b)("li",{parentName:"ul"},"create a ",Object(o.b)("inlineCode",{parentName:"li"},"form")," to display our inputs and ",Object(o.b)("inlineCode",{parentName:"li"},"h2")," tags"),Object(o.b)("li",{parentName:"ul"},"add ",Object(o.b)("inlineCode",{parentName:"li"},"value")," property and ",Object(o.b)("inlineCode",{parentName:"li"},"onChange")," event handler to our inputs. ",Object(o.b)("inlineCode",{parentName:"li"},"e.target.value")," will give us the value inside the input field.")),Object(o.b)("p",null,"The important part about this component, we need to focus on ",Object(o.b)("inlineCode",{parentName:"p"},"onChange")," event handler. ",Object(o.b)("inlineCode",{parentName:"p"},"onChange")," event fires whenever the user types in something.\nWhenever the first input value changes, we update the ",Object(o.b)("inlineCode",{parentName:"p"},"firstName")," property, and when the second input value changes, we update the ",Object(o.b)("inlineCode",{parentName:"p"},"lastName")," property."),Object(o.b)("p",null,"Okay, everything looks perfect. Now, let's test our code."),Object(o.b)("p",null,Object(o.b)("img",{alt:"demo",src:n(126).default})),Object(o.b)("p",null,"We have a problem with updating our states; so, as you can see, we can update both input fields; but when we switch between them we cannot keep track of our old state."),Object(o.b)("p",null,"Let's add this one line of code to see what is happening."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"// src > components > StateHookObject.js\n// ...\n  <h2>Last name is: {name.lastName}</h2>\n\n// add this line to your code\n  <h2>{JSON.stringify(name)}</h2>\n  </form>\n")),Object(o.b)("p",null,Object(o.b)("img",{alt:"demo",src:n(127).default})),Object(o.b)("p",null,"When we type for the first name input, the last name input is disappearing. ",Object(o.b)("strong",{parentName:"p"},"Because state doesn't automatically merge and update the state.")," ",Object(o.b)("inlineCode",{parentName:"p"},"useState"),' does not "merge" its arguments with the old state. They just set the state. Every time, with every rerender we don\'t mutate our state, we get a completely new state, we can change our state with the setter function.'),Object(o.b)("p",null,"In class components ",Object(o.b)("inlineCode",{parentName:"p"},"setState")," will merge the state, ",Object(o.b)("inlineCode",{parentName:"p"},"useState")," hook will not merge the state. To handle this, we will use ",Object(o.b)("inlineCode",{parentName:"p"},"spread operator")," to merge. With this, setter object will copy every in the ",Object(o.b)("inlineCode",{parentName:"p"},"name")," object, and overwrite the ",Object(o.b)("inlineCode",{parentName:"p"},"firstName")," or ",Object(o.b)("inlineCode",{parentName:"p"},"lastName")," fields with a different value."),Object(o.b)("p",null,"Let's see this in our code:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'// src > components > StateHookObject\n\n// ...\nreturn (\n  <form>\n      <input\n        type="text"\n        value={name.firstName}\n        // add spread operator\n        onChange={(e) => setName({...name, firstName: e.target.value})}\n      />\n      <input\n        type="text"\n        value={name.lastName}\n        // add spread operator\n        onChange={(e) => setName({...name, lastName: e.target.value})}\n      />\n      <h2>First name is: {name.firstName}</h2>\n      <h2>Last name is: {name.lastName}</h2>\n      <h2>{JSON.stringify(name)}</h2>\n  </form>\n);\n')),Object(o.b)("p",null,Object(o.b)("img",{alt:"demo",src:n(128).default})),Object(o.b)("p",null,"Some Key Points:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"We ",Object(o.b)("inlineCode",{parentName:"li"},"shouldn't mutate the state")," in our components."),Object(o.b)("li",{parentName:"ul"},"We need to pass previous state by the state setter(with the spread operator)")),Object(o.b)("h2",{id:"usestate-with-arrays"},"useState with arrays"),Object(o.b)("p",null,Object(o.b)("img",{alt:"todo",src:n(129).default})),Object(o.b)("p",null,"Now, we will make another component that we will use an array for the initial state. Let's see what will happen. Create a new file under components directory and name it ",Object(o.b)("inlineCode",{parentName:"p"},"StateHookArray.js")," and copy this code. Again don't forget to import into ",Object(o.b)("inlineCode",{parentName:"p"},"App.js")),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'\n// src > components > StateHookArray.js\n\nimport React, { useState } from \'react\';\n\nconst StateHookArray = () => {\n    const [ items, setItems ] = useState([\n      { id: 1, listItem: \'go on a holiday\' },\n      { id: 2, listItem: \'go hiking\' },\n      { id: 3, listItem: \'learn React Hooks\' }\n    ]);\n\n    // remove items\n    const removeItem = (id) => {\n      setItems(items.filter((item) => item.id !== id));\n    };\n\n    const addItem = () => {\n      setItems([\n        // don\'t mutate the array, use spread operator to get the previous state\n        ...items,\n        // add new item\n        {\n          id: 4,\n          listItem: \'meet deadlines\'\n        }\n      ]);\n    };\n\n    return (\n      <div className="ui container">\n        <div className="ui grid">\n          {items.map((item) => {\n            const { id, listItem } = item;\n            return (\n              <div key={id} className="row">\n                <h2 className="five wide column">{listItem}</h2>\n                {/* when it is clicked, remove the individual item */}\n                <button className="three wide column btn" onClick={() => removeItem(id)}>\n                  remove\n                </button>\n              </div>\n            );\n          })}\n        </div>\n        {/* when it is clicked, empty the whole array */}\n        <button className="btn" onClick={() => setItems([])}>\n          Delete all\n        </button>\n        {/* when it is clicked, add one new item to the list */}\n        <button className="btn" onClick={() => addItem()}>\n          Add Item\n        </button>\n      </div>\n    );\n  };\n\nexport default StateHookArray;\n    \n\n')),Object(o.b)("p",null,"Let\u2019s break down the code above to explain what we\u2019ve added and how it works."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"importing the ",Object(o.b)("inlineCode",{parentName:"li"},"useState")," hook from React"),Object(o.b)("li",{parentName:"ul"},"creating a new constant that returns ",Object(o.b)("inlineCode",{parentName:"li"},"items")," and ",Object(o.b)("inlineCode",{parentName:"li"},"setItems")," from ",Object(o.b)("inlineCode",{parentName:"li"},"useState"),"."),Object(o.b)("li",{parentName:"ul"},"initializing the ",Object(o.b)("inlineCode",{parentName:"li"},"useState")," hook with an array of objects."),Object(o.b)("li",{parentName:"ul"},"returning some JSX elements and Semantic UI to add a grid system"),Object(o.b)("li",{parentName:"ul"},"mapping over the array to get each array item"),Object(o.b)("li",{parentName:"ul"},"returning JSX elements to display our array items"),Object(o.b)("li",{parentName:"ul"},"adding a remove button for every item, when it is clicked, we can remove the individual item "),Object(o.b)("li",{parentName:"ul"},"adding a button with an ",Object(o.b)("inlineCode",{parentName:"li"},"onClick")," handler that invokes the ",Object(o.b)("inlineCode",{parentName:"li"},"setItems")," function of ",Object(o.b)("inlineCode",{parentName:"li"},"useState")," with an empty array. So, we can remove everything from our array."),Object(o.b)("li",{parentName:"ul"},"adding an add button, when it is clicked on it adds a new item. We merge the old state with the updated state with the help of ES6 spread operator.")),Object(o.b)("p",null,Object(o.b)("img",{alt:"demo",src:n(130).default})),Object(o.b)("p",null,"And yes, we are done with the ",Object(o.b)("inlineCode",{parentName:"p"},"useState")," hook. \ud83e\udd73"))}b.isMDXComponent=!0}}]);